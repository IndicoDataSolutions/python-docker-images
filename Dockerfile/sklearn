FROM indicoio/numpy as numpy-base
FROM indicoio/scipy as scipy-base
FROM indicoio/pandas as pandas-base

FROM indicoio/alpine

COPY --from=numpy-base /root/.cache/pip/wheels/ /root/.cache/pip/wheels
COPY --from=pandas-base /root/.cache/pip/wheels/ /root/.cache/pip/wheels
COPY --from=scipy-base /root/.cache/pip/wheels/ /root/.cache/pip/wheels

RUN apk add --no-cache zlib-dev libjpeg jpeg-dev libpng-dev freetype-dev openblas openblas-dev && \
    pip3 install Cython && \
    pip3 install numpy==1.15.4 && \
    pip3 install scipy==1.1.0 && \
    pip3 install pandas==0.23.4 && \
    pip3 install scikit-learn==0.19.2 imbalanced-learn==0.3.3 && \
    pip3 install scikit-image==0.14.0
