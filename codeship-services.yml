alpine-3-9-3:
  build:
    dockerfile: Dockerfile/alpine
    args:
      ALPINE_VERSION: 3.9.3
  dockercfg_service: gcr-dockercfg

aws:
  build:
    dockerfile: Dockerfile/aws
  dockercfg_service: gcr-dockercfg

flower:
  build:
    dockerfile: Dockerfile/flower
  dockercfg_service: gcr-dockercfg

nginx-uploader:
  build:
    dockerfile: Dockerfile/nginx-uploader
    args:
      nginx_version: 1.17.5
  dockercfg_service: gcr-dockercfg

numpy-ubuntu:
  build:
    dockerfile: Dockerfile/numpy-ubuntu
  dockercfg_service: gcr-dockercfg

nvidia-install:
  build:
    dockerfile: Dockerfile/nvidia-install
  dockercfg_service: gcr-dockercfg

pandas-ubuntu:
  build:
    dockerfile: Dockerfile/pandas-ubuntu
  dockercfg_service: gcr-dockercfg

scipy-ubuntu:
  build:
    dockerfile: Dockerfile/scipy-ubuntu
  dockercfg_service: gcr-dockercfg

sklearn-ubuntu:
  build:
    dockerfile: Dockerfile/sklearn-ubuntu
  dockercfg_service: gcr-dockercfg

tensorflow-ubuntu:
  build:
    dockerfile: Dockerfile/tensorflow_ubuntu
  dockercfg_service: gcr-dockercfg

tsne-ubuntu:
  build:
    dockerfile: Dockerfile/tsne-ubuntu
  dockercfg_service: gcr-dockercfg

ubuntu-18-04:
  build:
    dockerfile: Dockerfile/ubuntu_18_04
    args:
      UBUNTU_VERSION: 18.04
  dockercfg_service: gcr-dockercfg

ubuntu-gpu:
  build:
    dockerfile: Dockerfile/ubuntu_gpu
  dockercfg_service: gcr-dockercfg

gcr-dockercfg:
  image: indicoio/gcr-dockercfg
  add_docker: true
  encrypted_env_file: codeship.env

test_base:
  image: busybox
  depends_on:
    - aws
    - flower
    - nginx-uploader
    - numpy-ubuntu
    - nvidia-install
    - pandas-ubuntu
    - scipy-ubuntu
    - sklearn-ubuntu
    - ubuntu-gpu
    - tsne-ubuntu

test_libs:
  image: busybox
  depends_on:
    - tensorflow-ubuntu
    - alpine-3-9-3
    - ubuntu-18-04
